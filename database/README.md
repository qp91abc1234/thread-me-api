# Database Operations Guide

æœ¬é¡¹ç›®ä½¿ç”¨ [TypeORM Migrations](https://typeorm.io/migrations) æ¥ç®¡ç†æ•°æ®åº“ç»“æ„çš„å˜æ›´ã€‚ä»¥ä¸‹æ˜¯æ‰€æœ‰ç›¸å…³å‘½ä»¤çš„è¯¦ç»†è¯´æ˜ã€‚

## ğŸ“ å¿«é€Ÿå¼€å§‹

æ‰€æœ‰çš„æ•°æ®åº“æ“ä½œå‘½ä»¤éƒ½ä»¥ `database:` å¼€å¤´ã€‚

### 1. è‡ªåŠ¨ç”Ÿæˆè¿ç§»æ–‡ä»¶ (Generate)
å½“ä½ ä¿®æ”¹äº† `entity` æ–‡ä»¶ï¼ˆå¦‚æ·»åŠ äº†å­—æ®µï¼‰åï¼Œè¿è¡Œæ­¤å‘½ä»¤æ¥è‡ªåŠ¨ç”Ÿæˆ SQL å˜æ›´è„šæœ¬ã€‚

```bash
pnpm database:generate å­˜æ”¾è·¯å¾„/å˜æ›´æè¿°

# æ·»åŠ äº† User è¡¨çš„ age å­—æ®µ
pnpm database:generate database/migrations/AddUserAge
```

---

### 2. æ‰§è¡Œè¿ç§» (Run)
å°† `migrations` ç›®å½•ä¸‹çš„æœªæ‰§è¡Œè„šæœ¬åº”ç”¨åˆ°æ•°æ®åº“ä¸­ï¼ˆæ›´æ–°è¡¨ç»“æ„ï¼‰ã€‚

```bash
pnpm database:run
```

---

### 3. æ’¤é”€è¿ç§» (Revert)
å¦‚æœåˆšæ‰çš„è¿ç§»è·‘æŒ‚äº†ï¼Œæˆ–è€…é€»è¾‘å†™é”™äº†ï¼Œå¯ä»¥ç”¨æ­¤å‘½ä»¤å›æ»š**æœ€è¿‘ä¸€æ¬¡**æ‰§è¡Œçš„è¿ç§»ã€‚

```bash
pnpm database:revert
```

---

### 4. åˆ›å»ºç©ºè¿ç§» (Create)
å¦‚æœä½ éœ€è¦æ‰‹å†™å¤æ‚çš„ SQLï¼ˆTypeORM æ— æ³•è‡ªåŠ¨ç”Ÿæˆçš„ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤åˆ›å»ºä¸€ä¸ªç©ºçš„è¿ç§»æ¨¡ç‰ˆã€‚

```bash
pnpm database:create å­˜æ”¾è·¯å¾„/å˜æ›´æè¿°
pnpm database:create database/migrations/ComplexDataMove
```

---

### 5. æ•°æ®å¡«å…… (Seed)
åˆå§‹åŒ–æ•°æ®åº“çš„åŸºç¡€æ•°æ®ï¼ˆå¦‚ç®¡ç†å‘˜è´¦å·ã€åŸºç¡€æƒé™é…ç½®ï¼‰ã€‚

```bash
pnpm database:seed
```